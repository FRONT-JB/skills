# E2E 테스트 시나리오: Admin - 회원 관리

## 메타데이터
- **App**: Admin Console
- **Route**: /member-management
- **생성일**: 2026-02-15
- **페이지 타입**: List (목록 페이지)
- **분석 파일**:
  - Page: apps/admin/src/app/member-management/page.tsx
  - Components: 2개 (MemberFilter, MemberTable)
  - Services: user 서비스 (schema, type)

---

## 사전 설정

### 테스트 계정
- **Email**: admin@example.com
- **Password**: test1234

### 테스트 URL
- **Base URL**: http://localhost:5173
- **Full URL**: http://localhost:5173/member-management

### 필수 조건
- Admin 콘솔 서버가 실행 중이어야 함 (localhost:5173)
- 테스트 계정으로 로그인되어 있어야 함
- 회원 데이터가 존재해야 함 (최소 20개 이상 권장)

---

## 테스트 시나리오

### 001: 페이지 기본 로딩
**목적**: 회원 관리 페이지가 정상적으로 로드되는지 확인

**테스트 절차**:
1. 로그인 후 회원 관리 메뉴 클릭
2. URL이 `/member-management`로 이동하는지 확인
3. 페이지 헤더에 "회원 관리 목록" 표시 확인
4. 필터 영역이 표시되는지 확인
5. 회원 목록 테이블이 표시되는지 확인

**예상 결과**:
- ✅ 페이지가 정상적으로 로드됨
- ✅ 필터 영역: 6개 필터 필드 표시 (가입일, 가입채널, 회원명, 휴대폰번호, 회원유형, 회원상태)
- ✅ 테이블 컬럼: 8개 (회원ID, 가입일, 회원유형, 회원상태, 회원명, 가입채널, 휴대폰번호, 관리)
- ✅ 기본 페이지네이션: 1페이지, 10개 항목
- ✅ 초기 데이터가 로드되어 테이블에 표시됨

---

### 002: 회원명 필터 검색
**목적**: 회원명으로 검색이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 회원명 필드에 검색어 입력 (예: "홍길동")
2. "적용하기" 버튼 클릭
3. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?name=홍길동` 쿼리 파라미터 추가됨
- ✅ 테이블에 검색어가 포함된 회원만 표시됨
- ✅ 필터 필드에 입력한 값이 유지됨

**Edge Case**:
- 검색 결과가 없을 경우: "데이터가 없습니다" 메시지 표시
- 특수문자 입력: 정상적으로 검색됨
- 공백만 입력: 검색 조건이 무시되고 전체 목록 표시

---

### 003: 휴대폰 번호 필터 검색
**목적**: 휴대폰 번호로 검색이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 휴대폰 번호 필드에 검색어 입력 (예: "010-1234-5678")
2. "적용하기" 버튼 클릭
3. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?phone=010-1234-5678` 쿼리 파라미터 추가됨
- ✅ 테이블에 검색어가 포함된 회원만 표시됨
- ✅ 하이픈 유무와 관계없이 검색 가능 (010-1234-5678, 01012345678)

**Edge Case**:
- 부분 검색 지원 확인 (예: "010"만 입력 시 010으로 시작하는 모든 번호)
- 숫자 아닌 문자 입력 시 처리

---

### 004: 가입일 범위 필터 검색
**목적**: 가입일 범위로 검색이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 가입일 시작일 선택 (예: 2024-01-01)
2. 가입일 종료일 선택 (예: 2024-12-31)
3. "적용하기" 버튼 클릭
4. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?signupDateHead=2024-01-01&signupDateTail=2024-12-31` 쿼리 파라미터 추가됨
- ✅ 테이블에 해당 기간에 가입한 회원만 표시됨
- ✅ 날짜 범위가 유효하지 않을 경우 (시작일 > 종료일) 에러 메시지 표시

**Edge Case**:
- 시작일만 입력: 해당 날짜 이후 가입한 회원 표시
- 종료일만 입력: 해당 날짜 이전 가입한 회원 표시
- 동일한 날짜 선택: 해당 날짜에 가입한 회원만 표시

---

### 005: 가입 채널 필터 검색
**목적**: 가입 채널 셀렉트 박스로 검색이 정상적으로 작동하는지 확인

**사용 가능한 값**: local, google, kakao, naver, apple

**테스트 절차**:
1. 가입 채널 셀렉트 박스 클릭
2. "카카오" 옵션 선택
3. "적용하기" 버튼 클릭
4. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?signupMethod=kakao` 쿼리 파라미터 추가됨
- ✅ 테이블에 카카오로 가입한 회원만 표시됨
- ✅ 테이블의 "가입 채널" 컬럼에 모두 "카카오"가 표시됨
- ✅ 셀렉트 박스에 선택한 값이 유지됨

---

### 006: 회원 유형 필터 검색
**목적**: 회원 유형 셀렉트 박스로 검색이 정상적으로 작동하는지 확인

**사용 가능한 값**: guest, user

**테스트 절차**:
1. 회원 유형 셀렉트 박스 클릭
2. "회원" 옵션 선택
3. "적용하기" 버튼 클릭
4. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?type=user` 쿼리 파라미터 추가됨
- ✅ 테이블에 정식 회원만 표시됨
- ✅ 테이블의 "회원 유형" 컬럼에 모두 "회원"이 표시됨
- ✅ 게스트 회원은 표시되지 않음

---

### 007: 회원 상태 필터 검색
**목적**: 회원 상태 셀렉트 박스로 검색이 정상적으로 작동하는지 확인

**사용 가능한 값**: active, suspended, withdrawn

**테스트 절차**:
1. 회원 상태 셀렉트 박스 클릭
2. "활성" 옵션 선택
3. "적용하기" 버튼 클릭
4. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?status=active` 쿼리 파라미터 추가됨
- ✅ 테이블에 활성 상태 회원만 표시됨
- ✅ 테이블의 "회원 상태" 컬럼에 모두 "활성"이 표시됨
- ✅ 정지/탈퇴 회원은 표시되지 않음

---

### 008: 복합 필터 검색
**목적**: 여러 필터를 조합하여 검색이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 회원명 입력: "홍길동"
2. 회원 상태 선택: "활성"
3. 가입 채널 선택: "카카오"
4. "적용하기" 버튼 클릭
5. 검색 결과 확인

**예상 결과**:
- ✅ URL에 `?name=홍길동&status=active&signupMethod=kakao` 쿼리 파라미터 추가됨
- ✅ 테이블에 모든 조건을 만족하는 회원만 표시됨
- ✅ 모든 필터 필드에 입력한 값이 유지됨

**추가 테스트**:
- 3개 이상의 필터 조합
- 검색 결과가 없을 경우 처리 확인

---

### 009: 필터 초기화
**목적**: 필터 초기화 기능이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 여러 필터 조건 입력 (회원명, 상태, 채널 등)
2. "적용하기" 버튼 클릭하여 검색
3. "초기화" 버튼 클릭
4. 결과 확인

**예상 결과**:
- ✅ 모든 필터 필드가 초기값으로 리셋됨
- ✅ URL에서 모든 쿼리 파라미터가 제거됨 (또는 기본값으로 리셋)
- ✅ 테이블에 전체 회원 목록이 다시 표시됨
- ✅ 페이지네이션도 1페이지로 리셋됨

---

### 010: 페이지네이션 - 다음 페이지
**목적**: 페이지네이션이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 회원 목록 페이지 로드
2. 첫 페이지 데이터 확인 (1-10번 회원)
3. "다음 페이지" 또는 "2" 버튼 클릭
4. 두 번째 페이지 데이터 확인

**예상 결과**:
- ✅ URL에 `?page=2` 쿼리 파라미터 추가됨
- ✅ 테이블에 11-20번 회원 데이터가 표시됨
- ✅ 페이지네이션 UI에 현재 페이지가 강조 표시됨
- ✅ "이전 페이지" 버튼이 활성화됨

**추가 테스트**:
- 마지막 페이지에서 "다음 페이지" 버튼 비활성화 확인
- 첫 페이지에서 "이전 페이지" 버튼 비활성화 확인
- 페이지 번호 직접 클릭 시 해당 페이지로 이동

---

### 011: 페이지네이션 - 페이지 크기 변경
**목적**: 페이지당 항목 수 변경이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 페이지 크기 셀렉트 박스 클릭 (기본: 10개)
2. 다른 값 선택 (예: 20개)
3. 결과 확인

**예상 결과**:
- ✅ URL에 `?size=20` 쿼리 파라미터 추가됨
- ✅ 테이블에 20개 항목이 표시됨
- ✅ 페이지 번호가 재계산됨 (총 페이지 수 변경)
- ✅ 현재 페이지가 1페이지로 리셋됨

**추가 테스트**:
- 다양한 페이지 크기 옵션 테스트 (10, 20, 50, 100)
- 필터와 페이지 크기를 동시에 적용했을 때 정상 작동 확인

---

### 012: 상세 페이지 이동
**목적**: 회원 상세 페이지로 이동 기능이 정상적으로 작동하는지 확인

**테스트 절차**:
1. 회원 목록에서 임의의 회원 선택
2. "관리" 컬럼의 "상세" 버튼 클릭
3. 상세 페이지로 이동 확인

**예상 결과**:
- ✅ URL이 `/member-management/{회원ID}`로 변경됨
- ✅ 상세 페이지가 정상적으로 로드됨
- ✅ 선택한 회원의 정보가 표시됨

**추가 테스트**:
- 여러 회원의 상세 페이지 이동 테스트
- 상세 페이지에서 "뒤로가기" 시 필터 상태가 유지되는지 확인

---

## 코드 분석 결과 (참고용)

### 파일 구조
```
apps/admin/src/app/member-management/
├── page.tsx                         # 메인 페이지
├── components/
│   ├── MemberFilter.tsx            # 필터 컴포넌트
│   ├── MemberTable.tsx             # 테이블 컴포넌트
│   └── index.ts                    # Export 파일

apps/admin/src/services/user/
├── schema.ts                        # Zod 스키마 정의
├── type.ts                          # TypeScript 타입 정의
├── services.ts                      # API 서비스 함수
└── queries.ts                       # React Query 쿼리 정의

apps/admin/src/services/meta/
└── schema/schema.ts                 # Enum 값 정의 (userType, userStatus, userSignupMethod)
```

### UI 요소 분석

#### 필터 필드 (6개)
| Name | Label | Type | Enum Values |
|------|-------|------|-------------|
| signupDateHead/signupDateTail | 가입일 | dateRange | - |
| signupMethod | 가입 채널 | select | local, google, kakao, naver, apple |
| name | 회원명 | text | - |
| phone | 휴대폰 번호 | text | - |
| type | 회원 유형 | select | guest, user |
| status | 회원 상태 | select | active, suspended, withdrawn |

#### 테이블 컬럼 (8개)
| ID | Header | Accessor | Format |
|----|--------|----------|---------|
| seq | 회원 ID | seq | - |
| signupDate | 가입일 | signupDate | formatAdminDate() |
| type | 회원 유형 | type | StatusLabel (guest/user) |
| status | 회원 상태 | status | StatusLabel (active/suspended/withdrawn) |
| name | 회원명 | name | - |
| signupMethod | 가입 채널 | signupMethod | StatusLabel (local/google/kakao/naver/apple) |
| phone | 휴대폰 번호 | phone | - |
| detail | 관리 | id | LinkButton → /member-management/$id |

### 상태/Enum 값

#### userTypeSchema (회원 유형)
- `guest`: 게스트
- `user`: 회원

#### userStatusSchema (회원 상태)
- `active`: 활성
- `suspended`: 정지
- `withdrawn`: 탈퇴

#### userSignupMethodSchema (가입 채널)
- `local`: 로컬 (이메일 가입)
- `google`: 구글
- `kakao`: 카카오
- `naver`: 네이버
- `apple`: 애플

### 페이지네이션
- **기본 페이지**: 1
- **기본 크기**: 10
- **파라미터**: page, size
- **구현**: useSuspenseQuery + useFilters hook

### 조건부 로직
- 특별한 조건부 렌더링 없음
- 모든 회원에 동일하게 "상세" 버튼 표시
- StatusLabel 컴포넌트로 상태값을 사용자 친화적으로 표시

---

## 테스트 실행 체크리스트

### 사전 준비
- [ ] Admin 콘솔 서버 실행 확인 (localhost:5173)
- [ ] 테스트 계정 로그인 (admin@example.com)
- [ ] 테스트 데이터 준비 (다양한 상태/유형/채널의 회원 20개 이상)

### 기본 기능
- [ ] 001: 페이지 기본 로딩

### 필터 기능 (각 필터 개별 테스트)
- [ ] 002: 회원명 필터 검색 (text)
- [ ] 003: 휴대폰 번호 필터 검색 (text)
- [ ] 004: 가입일 범위 필터 검색 (dateRange)
- [ ] 005: 가입 채널 필터 검색 (select)
- [ ] 006: 회원 유형 필터 검색 (select)
- [ ] 007: 회원 상태 필터 검색 (select)

### 복합 기능
- [ ] 008: 복합 필터 검색
- [ ] 009: 필터 초기화
- [ ] 010: 페이지네이션 - 다음 페이지
- [ ] 011: 페이지네이션 - 페이지 크기 변경
- [ ] 012: 상세 페이지 이동

---

## 참고사항

### 알려진 이슈
- 없음 (최초 시나리오 작성)

### 개선 사항
- [ ] API 응답 시간 테스트 추가 (성능 검증)
- [ ] 대용량 데이터 테스트 (1000개 이상 회원)
- [ ] 동시성 테스트 (여러 필터 빠르게 변경)
- [ ] 브라우저 뒤로가기/앞으로가기 테스트

### 관련 페이지
- 회원 상세 페이지: `/member-management/$id`
- 회원 생성 페이지: 없음 (관리자가 직접 생성 불가)

---

**생성일**: 2026-02-15
**생성 도구**: e2e-runner skill
**최종 수정일**: 2026-02-15
